# .github/workflows/colored-summary.yml
name: Create a Colored Summary

# This workflow can be triggered manually from the Actions tab
on:
  workflow_dispatch:

jobs:
  build-and-report:
    runs-on: ubuntu-latest
    steps:
      - name: Generate colorful summary
        run: |
          # The $GITHUB_STEP_SUMMARY environment variable points to a file that
          # GitHub Actions will render as Markdown in the job summary.
          # GitHub sanitizes HTML and strips CSS like `background-color`.
          # The most reliable way to show color is to use image badges.

          # --- Example 1: Using a Markdown Table with Image Badges (Recommended) ---
          echo "### 📊 Build and Test Report" >> $GITHUB_STEP_SUMMARY
          echo "| Status | Component | Details |" >> $GITHUB_STEP_SUMMARY
          echo "|:---|:---|:---|" >> $GITHUB_STEP_SUMMARY
          # Success (Green)
          echo "| ![SUCCESS](https://img.shields.io/badge/SUCCESS-green?style=for-the-badge) | API Build | Completed in 45s. |" >> $GITHUB_STEP_SUMMARY
          # Warning (Yellow)
          echo "| ![WARNING](https://img.shields.io/badge/WARNING-yellow?style=for-the-badge) | Linter | 12 non-critical issues found. |" >> $GITHUB_STEP_SUMMARY
          # Failed (Red)
          echo "| ![FAILED](https://img.shields.io/badge/FAILED-red?style=for-the-badge) | Unit Tests | 3 of 128 tests failed. |" >> $GITHUB_STEP_SUMMARY
          # Neutral/Info (Blue)
          echo "| ![SKIPPED](https://img.shields.io/badge/SKIPPED-blue?style=for-the-badge) | E2E Tests | Not run on PRs from forks. |" >> $GITHUB_STEP_SUMMARY
          
          echo "" >> $GITHUB_STEP_SUMMARY # Add a blank line for spacing
          echo '---' >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY

          # --- Example 2: Using a Blockquote for a callout message ---
          # This is more robust than a styled <div> and renders nicely.
          echo '### 📝 Overall Summary' >> $GITHUB_STEP_SUMMARY
          echo '> 🚨 **Action Required:** The workflow failed due to failing unit tests. Please review the logs and address the issues.' >> $GITHUB_STEP_SUMMARY

